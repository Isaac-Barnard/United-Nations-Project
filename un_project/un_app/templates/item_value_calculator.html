{% extends 'financial_base.html' %}

{% block title %}Item Value Calculator{% endblock %}

{% load static %}
{% load custom_filters %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/item_counter_styles.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Item Value Calculator</h1>

    <div style="margin-bottom: 1rem;">
        <label>
            <input type="checkbox" id="sumModeToggle">
            Enable Sum Mode (Add to current count)
        </label>
        <div style="margin-top: 0.5rem; font-size: 0.9em; color: #666;">
            <strong>Shortcuts:</strong>
            <strong>Stack:</strong> "s" = 64,
            <strong>Block:</strong> "b" = 9,
            <strong>Stack of Blocks:</strong> "v" = 576,
            <strong>Small Stack:</strong> "c" = 16
        </div>
    </div>

    <div class="item-table-container">
        {% for items_part in items_parts %}
            <div class="item-table">
                <table>
                    <thead>
                        <tr style="font-size: 0.9em;">
                            <th>Item Type</th>
                            <th>Total Value</th>
                            <th>Market Value</th>
                            <th>Number Owned</th>
                            <th>Update</th>
                        </tr>
                    </thead>
                    <tbody style="font-size: 0.9em;">
                        {% for item in items_part %}
                            {% if 'Section Divider' in item.name %}
                                <tr><td colspan="5" style="background-color: transparent;">&nbsp;</td></tr>
                            {% else %}
                                <tr class="item-row" data-market-value="{{ item.market_value }}" style="font-size: 0.9em;">
                                    <td class="item-name">{{ item.name }}</td>
                                    <td class="right-align total-value">0</td>
                                    <td class="right-align market-value">{{ item.market_value|custom_decimal_places }}</td>
                                    <td class="right-align current-count">0</td>
                                    <td>
                                        <input type="text"
                                            class="item-input form-control input-cell"
                                            style="width: 100%; text-align: right; padding: 2px 4px; height: 22px; font-size: 0.9em;"
                                            title="Enter number, 's' for 64, or '2s' for 128, etc.">
                                    </td>
                                </tr>
                            {% endif %}
                        {% empty %}
                            <tr><td colspan="5">No items found.</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endfor %}
    </div>

    <div class="total-value-sum">
        <h3>Total Value of All Items: <span class="total-items-value">0.0</span></h3>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/item_value_calculator.js' %}"></script>
{% endblock %}
