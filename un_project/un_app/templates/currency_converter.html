{% extends 'financial_base.html' %}
{% load static %}

{% block title %}
    Currency Converter
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/evaluation_styles.css' %}">
{% endblock %}

{% block content %}
    <h1>Currency Converter</h1>

    <!-- Dropdown to pick base currency -->
    <label for="base_currency">Convert into: </label>
    <select id="base_currency">
        {% for denomination in denominations %}
            <option value="{{ denomination.id }}"
                    data-equivalent="{{ denomination.diamond_equivalent }}"
                    {% if denomination.name|lower == "diamond" %}selected{% endif %}>
                {{ denomination.name }}
            </option>
        {% endfor %}
    </select>

    <table>
        <thead>
            <tr>
                <th style="width: 220px;">Total <span id="base_currency_label">Diamonds</span> Value</th>
                {% for denomination in denominations %}
                    <th>{{ denomination.name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="width: 220px;"><span id="total_converted_value">0</span></td>
                {% for denomination in denominations %}
                    <td>
                        <input type="number"
                            id="denomination_{{ denomination.id }}"
                            value="0"
                            min="0"
                            step="any">
                    </td>
                {% endfor %}
            </tr>
        </tbody>
    </table>

    <!-- Hidden JSON mapping denominations to diamond equivalents -->
    <script type="application/json" id="denomination_values">
        {
            {% for denomination in denominations %}
                "denomination_{{ denomination.id }}": {{ denomination.diamond_equivalent }}{% if not forloop.last %},{% endif %}
            {% endfor %}
        }
    </script>

    <script src="{% static 'js/currency_converter.js' %}"></script>
{% endblock %}
